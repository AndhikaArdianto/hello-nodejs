{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getVerifiedNews}from\"../api/Api\";import{useGlobal}from\"../context/GlobalContext\";import{Container}from\"react-bootstrap\";import TabelBagikanBerita from\"../components/TabelBagikanBerita\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function BagikanBerita(){const{globalData}=useGlobal();const username=globalData.username;const[berita,setBerita]=useState([]);const[enabledStatus,setEnabledStatus]=useState({});useEffect(()=>{const fetchBerita=async()=>{try{const response=await getVerifiedNews();const beritaArray=response.data.data;if(Array.isArray(beritaArray)){const beritaData=beritaArray.map(item=>({id:item.id,image:item.image,title:item.title,content:item.content,createdAt:item.createdAt,authorName:item.author.username,isActive:item.isActive}));const storedStatus=JSON.parse(localStorage.getItem(\"enabledStatus\"))||{};const updatedStatus={};beritaData.forEach(item=>{var _storedStatus$item$id;updatedStatus[item.id]=(_storedStatus$item$id=storedStatus[item.id])!==null&&_storedStatus$item$id!==void 0?_storedStatus$item$id:item.isActive;});setEnabledStatus(updatedStatus);setBerita(beritaData);}else{console.error(\"Data yang diterima bukan array:\",beritaArray);}}catch(error){console.error(\"Error fetching program: \",error);}};fetchBerita();},[username]);useEffect(()=>{localStorage.setItem(\"enabledStatus\",JSON.stringify(enabledStatus));},[enabledStatus]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"BAGIKAN BERITA\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"custom-hr\"})]}),/*#__PURE__*/_jsx(TabelBagikanBerita,{berita:berita,enabledStatus:enabledStatus,setEnabledStatus:setEnabledStatus})]});}export default BagikanBerita;","map":{"version":3,"names":["useState","useEffect","getVerifiedNews","useGlobal","Container","TabelBagikanBerita","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BagikanBerita","globalData","username","berita","setBerita","enabledStatus","setEnabledStatus","fetchBerita","response","beritaArray","data","Array","isArray","beritaData","map","item","id","image","title","content","createdAt","authorName","author","isActive","storedStatus","JSON","parse","localStorage","getItem","updatedStatus","forEach","_storedStatus$item$id","console","error","setItem","stringify","children","className"],"sources":["/home/ubuntu/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni-main/YARSI-Connect Alumni/front-end/src/pages/BagikanBerita.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getVerifiedNews } from \"../api/Api\";\nimport { useGlobal } from \"../context/GlobalContext\";\nimport { Container } from \"react-bootstrap\";\nimport TabelBagikanBerita from \"../components/TabelBagikanBerita\";\n\nfunction BagikanBerita() {\n  const { globalData } = useGlobal(); \n  const username = globalData.username; \n\n  const [berita, setBerita] = useState([]);\n  const [enabledStatus, setEnabledStatus] = useState({});\n\n  useEffect(() => {\n    const fetchBerita = async () => {\n      try {\n        const response = await getVerifiedNews();\n        const beritaArray = response.data.data;\n\n        if (Array.isArray(beritaArray)) {\n          const beritaData = beritaArray.map((item) => ({\n            id: item.id,\n            image: item.image,\n            title: item.title,\n            content: item.content,\n            createdAt: item.createdAt,\n            authorName: item.author.username,\n            isActive: item.isActive,\n          }));\n          const storedStatus =\n            JSON.parse(localStorage.getItem(\"enabledStatus\")) || {};\n          const updatedStatus = {};\n          beritaData.forEach((item) => {\n            updatedStatus[item.id] = storedStatus[item.id] ?? item.isActive;\n          });\n\n          setEnabledStatus(updatedStatus);\n          setBerita(beritaData);\n        } else {\n          console.error(\"Data yang diterima bukan array:\", beritaArray);\n        }\n      } catch (error) {\n        console.error(\"Error fetching program: \", error);\n      }\n    };\n\n    fetchBerita();\n  }, [username]);\n\n  useEffect(() => {\n    localStorage.setItem(\"enabledStatus\", JSON.stringify(enabledStatus));\n  }, [enabledStatus]);\n\n  return (\n    <>\n      <Container>\n        <h1 className=\"text-center\">BAGIKAN BERITA</h1>\n        <hr className=\"custom-hr\" />\n      </Container>\n      <TabelBagikanBerita\n        berita={berita}\n        enabledStatus={enabledStatus}\n        setEnabledStatus={setEnabledStatus}\n      />\n    </>\n  );\n}\n\nexport default BagikanBerita;\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,eAAe,KAAQ,YAAY,CAC5C,OAASC,SAAS,KAAQ,0BAA0B,CACpD,OAASC,SAAS,KAAQ,iBAAiB,CAC3C,MAAO,CAAAC,kBAAkB,KAAM,kCAAkC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAElE,QAAS,CAAAC,aAAaA,CAAA,CAAG,CACvB,KAAM,CAAEC,UAAW,CAAC,CAAGV,SAAS,CAAC,CAAC,CAClC,KAAM,CAAAW,QAAQ,CAAGD,UAAU,CAACC,QAAQ,CAEpC,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACiB,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEtDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,eAAe,CAAC,CAAC,CACxC,KAAM,CAAAmB,WAAW,CAAGD,QAAQ,CAACE,IAAI,CAACA,IAAI,CAEtC,GAAIC,KAAK,CAACC,OAAO,CAACH,WAAW,CAAC,CAAE,CAC9B,KAAM,CAAAI,UAAU,CAAGJ,WAAW,CAACK,GAAG,CAAEC,IAAI,GAAM,CAC5CC,EAAE,CAAED,IAAI,CAACC,EAAE,CACXC,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,KAAK,CAAEH,IAAI,CAACG,KAAK,CACjBC,OAAO,CAAEJ,IAAI,CAACI,OAAO,CACrBC,SAAS,CAAEL,IAAI,CAACK,SAAS,CACzBC,UAAU,CAAEN,IAAI,CAACO,MAAM,CAACpB,QAAQ,CAChCqB,QAAQ,CAAER,IAAI,CAACQ,QACjB,CAAC,CAAC,CAAC,CACH,KAAM,CAAAC,YAAY,CAChBC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAI,CAAC,CAAC,CACzD,KAAM,CAAAC,aAAa,CAAG,CAAC,CAAC,CACxBhB,UAAU,CAACiB,OAAO,CAAEf,IAAI,EAAK,KAAAgB,qBAAA,CAC3BF,aAAa,CAACd,IAAI,CAACC,EAAE,CAAC,EAAAe,qBAAA,CAAGP,YAAY,CAACT,IAAI,CAACC,EAAE,CAAC,UAAAe,qBAAA,UAAAA,qBAAA,CAAIhB,IAAI,CAACQ,QAAQ,CACjE,CAAC,CAAC,CAEFjB,gBAAgB,CAACuB,aAAa,CAAC,CAC/BzB,SAAS,CAACS,UAAU,CAAC,CACvB,CAAC,IAAM,CACLmB,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAExB,WAAW,CAAC,CAC/D,CACF,CAAE,MAAOwB,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED1B,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACL,QAAQ,CAAC,CAAC,CAEdb,SAAS,CAAC,IAAM,CACdsC,YAAY,CAACO,OAAO,CAAC,eAAe,CAAET,IAAI,CAACU,SAAS,CAAC9B,aAAa,CAAC,CAAC,CACtE,CAAC,CAAE,CAACA,aAAa,CAAC,CAAC,CAEnB,mBACER,KAAA,CAAAE,SAAA,EAAAqC,QAAA,eACEvC,KAAA,CAACL,SAAS,EAAA4C,QAAA,eACRzC,IAAA,OAAI0C,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC/CzC,IAAA,OAAI0C,SAAS,CAAC,WAAW,CAAE,CAAC,EACnB,CAAC,cACZ1C,IAAA,CAACF,kBAAkB,EACjBU,MAAM,CAAEA,MAAO,CACfE,aAAa,CAAEA,aAAc,CAC7BC,gBAAgB,CAAEA,gBAAiB,CACpC,CAAC,EACF,CAAC,CAEP,CAEA,cAAe,CAAAN,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}