{"ast":null,"code":"import{Container,Button,Form,InputGroup,Nav}from'react-bootstrap';import\"../styles/login.css\";import{useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import Alerts from'../components/Alerts';import{login}from'../api/Api';import{useGlobal}from'../context/GlobalContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const location=useLocation();const{updateGlobalData}=useGlobal();const[showPassword,setShowPassword]=useState(false);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[peringatanInvalid,setPeringatanInvalid]=useState(\"\");const togglePasswordVisibility=()=>{setShowPassword(!showPassword);};const handleLogin=async()=>{if(!username||!password){setPeringatanInvalid(\"Username dan Kata Sandi tidak boleh kosong\");return;}else{setPeringatanInvalid(\"\");}try{var _response$data,_response$data$data,_response$data$data$u,_response$data2,_response$data2$data,_response$data2$data$,_response$data2$data$2,_response$data3,_response$data3$data,_response$data3$data$;const response=await login(username,password);const userId=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:(_response$data$data$u=_response$data$data.user)===null||_response$data$data$u===void 0?void 0:_response$data$data$u.id;const role=response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:(_response$data2$data=_response$data2.data)===null||_response$data2$data===void 0?void 0:(_response$data2$data$=_response$data2$data.user)===null||_response$data2$data$===void 0?void 0:(_response$data2$data$2=_response$data2$data$.role)===null||_response$data2$data$2===void 0?void 0:_response$data2$data$2.name;const userName=response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:(_response$data3$data=_response$data3.data)===null||_response$data3$data===void 0?void 0:(_response$data3$data$=_response$data3$data.user)===null||_response$data3$data$===void 0?void 0:_response$data3$data$.username;updateGlobalData('id',userId);updateGlobalData('role',role);updateGlobalData('username',userName);const redirectTo=new URLSearchParams(location.search).get('redirectTo');// Logika pengalihan berdasarkan role\nif(role==='alumni'){if(redirectTo==='/tracer-study-alumni'){navigate(redirectTo);}else{navigate('/dashboard-alumni');}}else if(role==='admin_universitas'){navigate('/dashboard-admin-universitas');}else if(role==='admin_prodi'){navigate('/dashboard-admin-prodi');}else{setPeringatanInvalid(\"Role tidak dikenal\");}}catch(error){var _error$response,_error$response$data;console.error(\"Error saat login:\",error);const errorMessage=(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message;setPeringatanInvalid(errorMessage||\"Terjadi kesalahan saat login.\");}};return/*#__PURE__*/_jsx(Container,{fluid:true,className:\"login-container\",children:/*#__PURE__*/_jsxs(Container,{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-login\",children:\"KONEKSI\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mx-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Selamat datang di Sistem Informasi Alumni Universitas YARSI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-5\",children:\"Masukkan detail Anda untuk masuk ke akun Anda\"})]}),peringatanInvalid&&/*#__PURE__*/_jsx(Alerts,{peringatan:peringatanInvalid}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3 mx-4\",controlId:\"formGroupUsername\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"label-login\",type:\"text\",placeholder:\"Masukkan Username\",value:username,onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3 mx-4\",controlId:\"formGroupPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Kata Sandi\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Form.Control,{className:\"label-login\",type:showPassword?\"text\":\"password\",placeholder:\"Masukkan Kata Sandi\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(InputGroup.Text,{onClick:togglePasswordVisibility,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"i\",{className:showPassword?\"fa-solid fa-eye\":\"fa-solid fa-eye-slash\"})})]})]}),/*#__PURE__*/_jsx(Nav.Link,{className:\"ubah-password mb-4 mx-4\",onClick:()=>navigate('/ubah-kata-sandi'),children:\" Ubah Kata Sandi\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-20\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",className:\"w-50\",onClick:handleLogin,children:\"Masuk\"})})]})});}export default Login;","map":{"version":3,"names":["Container","Button","Form","InputGroup","Nav","useState","useNavigate","useLocation","Alerts","login","useGlobal","jsx","_jsx","jsxs","_jsxs","Login","navigate","location","updateGlobalData","showPassword","setShowPassword","username","setUsername","password","setPassword","peringatanInvalid","setPeringatanInvalid","togglePasswordVisibility","handleLogin","_response$data","_response$data$data","_response$data$data$u","_response$data2","_response$data2$data","_response$data2$data$","_response$data2$data$2","_response$data3","_response$data3$data","_response$data3$data$","response","userId","data","user","id","role","name","userName","redirectTo","URLSearchParams","search","get","error","_error$response","_error$response$data","console","errorMessage","message","fluid","className","children","peringatan","Group","controlId","Label","Control","type","placeholder","value","onChange","e","target","Text","onClick","style","cursor","Link","size"],"sources":["/home/ubuntu/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni/front-end/src/pages/Login.js"],"sourcesContent":["import { Container, Button, Form, InputGroup, Nav } from 'react-bootstrap';\nimport \"../styles/login.css\";\nimport { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom'; \nimport Alerts from '../components/Alerts';\nimport { login } from '../api/Api';\nimport { useGlobal } from '../context/GlobalContext'; \n\nfunction Login() {\n    const navigate = useNavigate();\n    const location = useLocation(); \n    const { updateGlobalData } = useGlobal(); \n    const [showPassword, setShowPassword] = useState(false);\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [peringatanInvalid, setPeringatanInvalid] = useState(\"\");\n\n    const togglePasswordVisibility = () => {\n        setShowPassword(!showPassword);\n    };\n\n    const handleLogin = async () => {\n        if (!username || !password) {\n            setPeringatanInvalid(\"Username dan Kata Sandi tidak boleh kosong\");\n            return;\n        } else {\n            setPeringatanInvalid(\"\");\n        }\n\n        try {\n            const response = await login(username, password);\n\n            const userId = response?.data?.data?.user?.id;\n            const role = response?.data?.data?.user?.role?.name;\n            const userName = response?.data?.data?.user?.username;\n\n            updateGlobalData('id', userId);\n            updateGlobalData('role', role);\n            updateGlobalData('username', userName);\n\n            const redirectTo = new URLSearchParams(location.search).get('redirectTo'); \n            // Logika pengalihan berdasarkan role\n            if (role === 'alumni') {\n                if (redirectTo === '/tracer-study-alumni') {\n                    navigate(redirectTo); \n                } else {\n                    navigate('/dashboard-alumni');\n                }\n            } else if (role === 'admin_universitas') {\n                navigate('/dashboard-admin-universitas');\n            } else if (role === 'admin_prodi') {\n                navigate('/dashboard-admin-prodi');\n            } else {\n                setPeringatanInvalid(\"Role tidak dikenal\");\n            }\n        } catch (error) {\n            console.error(\"Error saat login:\", error);\n            const errorMessage = error.response?.data?.message;\n            setPeringatanInvalid(errorMessage || \"Terjadi kesalahan saat login.\");\n        }\n    };\n\n    return (\n        <Container fluid className='login-container'>\n            <Container className='form-container'>\n                <h1 className='header-login'>KONEKSI</h1>\n                <div className='text-center mx-4'>\n                    <h5>Selamat datang di Sistem Informasi Alumni Universitas YARSI</h5>\n                    <p className='mb-5'>Masukkan detail Anda untuk masuk ke akun Anda</p>\n                </div>\n                {peringatanInvalid && <Alerts peringatan={peringatanInvalid} />}\n                <Form>\n                    <Form.Group className=\"mb-3 mx-4\" controlId=\"formGroupUsername\">\n                        <Form.Label>Username</Form.Label>\n                        <Form.Control\n                            className='label-login'\n                            type=\"text\"\n                            placeholder=\"Masukkan Username\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                        />\n                    </Form.Group>\n                    <Form.Group className=\"mb-3 mx-4\" controlId=\"formGroupPassword\">\n                        <Form.Label>Kata Sandi</Form.Label>\n                        <InputGroup>\n                            <Form.Control\n                                className='label-login'\n                                type={showPassword ? \"text\" : \"password\"}\n                                placeholder=\"Masukkan Kata Sandi\"\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                            />\n                            <InputGroup.Text\n                                onClick={togglePasswordVisibility}\n                                style={{ cursor: 'pointer' }}\n                            >\n                                <i className={showPassword ? \"fa-solid fa-eye\" : \"fa-solid fa-eye-slash\"}></i>\n                            </InputGroup.Text>\n                        </InputGroup>\n                    </Form.Group>\n                    <Nav.Link className='ubah-password mb-4 mx-4' onClick={() => navigate('/ubah-kata-sandi')}> Ubah Kata Sandi</Nav.Link>\n                </Form>\n                <div className=\"d-flex justify-content-center mt-20\">\n                    <Button size=\"sm\" className='w-50' onClick={handleLogin}>\n                        Masuk\n                    </Button>\n                </div>\n            </Container>\n        </Container>\n    );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}