{"ast":null,"code":"import{Navigate,Outlet}from\"react-router-dom\";import{useGlobal}from\"../context/GlobalContext\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoutes=_ref=>{let{allowedRoles}=_ref;const{globalData}=useGlobal();const{role}=globalData;// Jika role tidak ditemukan di globalData atau localStorage, arahkan ke halaman login\nif(!role){const storedRole=localStorage.getItem(\"role\");if(!storedRole){return/*#__PURE__*/_jsx(Navigate,{to:\"/masuk\",replace:true});// Redirect ke halaman login jika role tidak ada\n}// Jika role ditemukan di localStorage, set role ke globalData\nglobalData.role=storedRole;}// Periksa apakah role pengguna termasuk dalam allowedRoles\nif(allowedRoles&&!allowedRoles.includes(role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/akses-ditolak\",replace:true});}return/*#__PURE__*/_jsx(Outlet,{});};export default ProtectedRoutes;","map":{"version":3,"names":["Navigate","Outlet","useGlobal","jsx","_jsx","ProtectedRoutes","_ref","allowedRoles","globalData","role","storedRole","localStorage","getItem","to","replace","includes"],"sources":["/home/ubuntu/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni/front-end/src/components/ProtectedRoutes.js"],"sourcesContent":["import { Navigate, Outlet } from \"react-router-dom\";\nimport { useGlobal } from \"../context/GlobalContext\";\n\nconst ProtectedRoutes = ({ allowedRoles }) => {\n  const { globalData } = useGlobal();\n  const { role } = globalData;\n\n  // Jika role tidak ditemukan di globalData atau localStorage, arahkan ke halaman login\n  if (!role) {\n    const storedRole = localStorage.getItem(\"role\");\n    if (!storedRole) {\n      return <Navigate to=\"/masuk\" replace />; // Redirect ke halaman login jika role tidak ada\n    }\n    // Jika role ditemukan di localStorage, set role ke globalData\n    globalData.role = storedRole;\n  }\n\n  // Periksa apakah role pengguna termasuk dalam allowedRoles\n  if (allowedRoles && !allowedRoles.includes(role)) {\n    return <Navigate to=\"/akses-ditolak\" replace />;\n  }\n\n  return <Outlet />;\n};\n\nexport default ProtectedRoutes;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,MAAM,KAAQ,kBAAkB,CACnD,OAASC,SAAS,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,KAAM,CAAAC,eAAe,CAAGC,IAAA,EAAsB,IAArB,CAAEC,YAAa,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAEE,UAAW,CAAC,CAAGN,SAAS,CAAC,CAAC,CAClC,KAAM,CAAEO,IAAK,CAAC,CAAGD,UAAU,CAE3B;AACA,GAAI,CAACC,IAAI,CAAE,CACT,KAAM,CAAAC,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAI,CAACF,UAAU,CAAE,CACf,mBAAON,IAAA,CAACJ,QAAQ,EAACa,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CAAE;AAC3C,CACA;AACAN,UAAU,CAACC,IAAI,CAAGC,UAAU,CAC9B,CAEA;AACA,GAAIH,YAAY,EAAI,CAACA,YAAY,CAACQ,QAAQ,CAACN,IAAI,CAAC,CAAE,CAChD,mBAAOL,IAAA,CAACJ,QAAQ,EAACa,EAAE,CAAC,gBAAgB,CAACC,OAAO,MAAE,CAAC,CACjD,CAEA,mBAAOV,IAAA,CAACH,MAAM,GAAE,CAAC,CACnB,CAAC,CAED,cAAe,CAAAI,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}