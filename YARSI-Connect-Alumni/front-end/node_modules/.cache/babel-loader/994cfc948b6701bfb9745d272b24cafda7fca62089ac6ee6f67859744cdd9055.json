{"ast":null,"code":"import{useState,useEffect,useRef}from\"react\";import{TextField,Container,Typography,Box}from\"@mui/material\";import{getMyEvents,updateEvents}from\"../api/Api\";import{ToastContainer,toast,Slide}from\"react-toastify\";import{useParams,useNavigate}from\"react-router-dom\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FormUpdateAcara(){const{id}=useParams();const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[image,setImage]=useState(null);const[date,setDate]=useState(\"\");const[imagePreview,setImagePreview]=useState(null);const fileInputRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const fetchData=async()=>{try{const response=await getMyEvents(id);if(response.data&&Array.isArray(response.data.data)){const acara=response.data.data.find(a=>a.id===id);if(acara){setTitle(acara.title);setDescription(acara.description);const formattedDate=new Date(acara.date).toISOString().split(\"T\")[0];setDate(formattedDate);setImage(acara.image);setImagePreview(acara.image);}else{console.log(\"Acara tidak ditemukan dengan id:\",id);}}else{console.error(\"Data yang diterima bukan array:\",response.data);}}catch(error){console.error(\"Error fetching events:\",error);}};fetchData();},[id]);// Efek dijalankan setiap kali id berubah\nconst updateAcara=async e=>{e.preventDefault();try{const formData=new FormData();formData.append(\"title\",title);formData.append(\"description\",description);formData.append(\"image\",image);formData.append(\"date\",date);await updateEvents(id,formData);toast.success(\"Acara berhasil diperbarui!\",{position:\"top-right\",hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Slide,autoClose:2000});setTitle(\"\");setDescription(\"\");setDate(\"\");setImage(null);setImagePreview(null);setTimeout(()=>navigate(\"/manajemen-acara\"),2000);if(fileInputRef.current){fileInputRef.current.value=null;}}catch(error){var _error$response,_error$response$data,_error$response2;console.error(\"Error dari server:\",((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error);}};const handleImageChange=e=>{const file=e.target.files[0];setImage(file);const reader=new FileReader();reader.onloadend=()=>{setImagePreview(reader.result);};if(file){reader.readAsDataURL(file);}else{setImagePreview(null);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:\"PERBARUI ACARA\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:updateAcara,noValidate:true,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Judul Acara\",value:title,onChange:e=>setTitle(e.target.value),margin:\"normal\"}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",as:\"label\",style:{marginTop:\"16px\",marginBottom:\"16px\"},children:[\"Perbarui Foto\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,onChange:handleImageChange,ref:fileInputRef})]}),imagePreview&&/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Preview Foto\"}),/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",style:{width:\"300px\",maxHeight:\"500px\"}})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Tanggal Acara\",type:\"date\",value:date,onChange:e=>setDate(e.target.value),InputLabelProps:{shrink:true},margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Deskripsi Acara\",multiline:true,rows:3,value:description,onChange:e=>setDescription(e.target.value),margin:\"normal\"}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"flex-end\",mt:3},children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Simpan Perubahan\"})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default FormUpdateAcara;","map":{"version":3,"names":["useState","useEffect","useRef","TextField","Container","Typography","Box","getMyEvents","updateEvents","ToastContainer","toast","Slide","useParams","useNavigate","Button","jsx","_jsx","jsxs","_jsxs","FormUpdateAcara","id","title","setTitle","description","setDescription","image","setImage","date","setDate","imagePreview","setImagePreview","fileInputRef","navigate","fetchData","response","data","Array","isArray","acara","find","a","formattedDate","Date","toISOString","split","console","log","error","updateAcara","e","preventDefault","formData","FormData","append","success","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","autoClose","setTimeout","current","value","_error$response","_error$response$data","_error$response2","message","handleImageChange","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","children","variant","align","gutterBottom","component","onSubmit","noValidate","sx","mt","fullWidth","label","onChange","margin","as","style","marginTop","marginBottom","type","hidden","ref","src","alt","width","maxHeight","InputLabelProps","shrink","multiline","rows","display","justifyContent"],"sources":["/home/ubuntu/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni/front-end/src/components/FormUpdateAcara.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport {\n  TextField,\n  Container,\n  Typography,\n  Box,\n} from \"@mui/material\";\nimport { getMyEvents, updateEvents } from \"../api/Api\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\"; \n\nfunction FormUpdateAcara() {\n  const { id } = useParams(); \n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null); \n  const [date, setDate] = useState(\"\");\n  const [imagePreview, setImagePreview] = useState(null); \n\n  const fileInputRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await getMyEvents(id);\n        if (response.data && Array.isArray(response.data.data)) {\n        \n          const acara = response.data.data.find((a) => a.id === id);\n          if (acara) {\n            setTitle(acara.title);\n            setDescription(acara.description);\n           \n            const formattedDate = new Date(acara.date).toISOString().split(\"T\")[0];\n            setDate(formattedDate);\n            setImage(acara.image);\n            setImagePreview(acara.image);\n          } else {\n            console.log(\"Acara tidak ditemukan dengan id:\", id);\n          }\n        } else {\n          console.error(\"Data yang diterima bukan array:\", response.data);\n        }\n      } catch (error) {\n        console.error(\"Error fetching events:\", error);\n      }\n    };\n\n    fetchData();\n  }, [id]); // Efek dijalankan setiap kali id berubah\n\n  const updateAcara = async (e) => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"description\", description);\n      formData.append(\"image\", image);\n      formData.append(\"date\", date);\n\n      await updateEvents(id, formData);\n      toast.success(\"Acara berhasil diperbarui!\", {\n        position: \"top-right\",\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        transition: Slide,\n        autoClose: 2000,\n      });\n\n      setTitle(\"\");\n      setDescription(\"\");\n      setDate(\"\");\n      setImage(null);\n      setImagePreview(null);\n\n      setTimeout(() => navigate(\"/manajemen-acara\"), 2000);\n\n      if (fileInputRef.current) {\n        fileInputRef.current.value = null;\n      }\n    } catch (error) {\n      console.error(\n        \"Error dari server:\",\n        error.response?.data?.message || error.response?.data || error\n      );\n    }\n  };\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setImage(file);\n\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImagePreview(reader.result);\n    };\n\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      setImagePreview(null);\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        PERBARUI ACARA\n      </Typography>\n      <Box\n        component=\"form\"\n        onSubmit={updateAcara}\n        noValidate\n        sx={{ mt: 3 }}\n      >\n        <TextField\n          fullWidth\n          label=\"Judul Acara\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          margin=\"normal\"\n        />\n\n        <Button\n          variant=\"primary\"\n          as=\"label\"\n          style={{ marginTop: \"16px\", marginBottom: \"16px\" }}\n        >\n          Perbarui Foto\n          <input\n            type=\"file\"\n            hidden\n            onChange={handleImageChange}\n            ref={fileInputRef}\n          />\n        </Button>\n\n        {imagePreview && (\n          <Box sx={{ mt: 2 }}>\n            <Typography variant=\"body1\">Preview Foto</Typography>\n            <img\n              src={imagePreview}\n              alt=\"Preview\"\n              style={{ width: \"300px\", maxHeight: \"500px\" }}\n            />\n          </Box>\n        )}\n\n        <TextField\n          fullWidth\n          label=\"Tanggal Acara\"\n          type=\"date\"\n          value={date}\n          onChange={(e) => setDate(e.target.value)}\n          InputLabelProps={{\n            shrink: true,\n          }}\n          margin=\"normal\"\n        />\n\n        <TextField\n          fullWidth\n          label=\"Deskripsi Acara\"\n          multiline\n          rows={3}\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          margin=\"normal\"\n        />\n\n        <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", mt: 3 }}>\n          <Button type=\"submit\" variant=\"primary\">\n            Simpan Perubahan\n          </Button>\n        </Box>\n      </Box>\n      <ToastContainer />\n    </Container>\n  );\n}\n\nexport default FormUpdateAcara;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}