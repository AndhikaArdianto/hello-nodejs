{"ast":null,"code":"import{Container,Button,Row,Col}from\"react-bootstrap\";import{postNews}from\"../api/Api\";import{useState,useRef}from\"react\";import{ToastContainer,toast,Slide}from\"react-toastify\";import TextField from\"@mui/material/TextField\";import Alerts from\"../components/Alerts\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FormBerita(){const[title,setTitle]=useState(\"\");const[content,setContent]=useState(\"\");const[image,setImage]=useState(null);const[imagePreview,setImagePreview]=useState(null);const[errorMessage,setErrorMessage]=useState(\"\");const fileInputRef=useRef(null);const tambahBerita=async e=>{e.preventDefault();setErrorMessage(\"\");try{await postNews(title,content,image);toast.success(\"Berita berhasil ditambahkan!\",{position:\"top-right\",hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\",transition:Slide,autoClose:2000});setTitle(\"\");setContent(\"\");setImage(null);setImagePreview(null);if(fileInputRef.current){fileInputRef.current.value=null;}}catch(error){var _error$response,_error$response$data,_error$response2,_error$response3,_error$response3$data;console.error(\"Error dari server:\",((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data));setErrorMessage(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||\"Semua data wajib diisi!\");}};const handleImageChange=e=>{const file=e.target.files[0];setImage(file);const reader=new FileReader();reader.onloadend=()=>{setImagePreview(reader.result);};if(file){reader.readAsDataURL(file);}else{setImagePreview(null);}};return/*#__PURE__*/_jsxs(Container,{style:{maxWidth:\"800px\",margin:\"0 auto\",padding:\"20px\"},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:tambahBerita,children:[errorMessage&&/*#__PURE__*/_jsx(Alerts,{peringatan:errorMessage}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4 align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:12,md:3,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"judul-berita\",children:\"Judul Berita:\"})}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(TextField,{id:\"judul-berita\",variant:\"outlined\",fullWidth:true,value:title,onChange:e=>setTitle(e.target.value)})})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4 align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:12,md:3,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unggah-foto\",children:\"Unggah Foto:\"})}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"unggah-foto\",onChange:handleImageChange,ref:fileInputRef,style:{display:\"block\"}})})]}),imagePreview&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:\"25px\"},children:[/*#__PURE__*/_jsx(\"label\",{style:{marginRight:\"100px\"},children:\"Preview Foto:\"}),/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",style:{width:\"200px\",height:\"auto\",objectFit:\"cover\"}})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4 align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:12,md:3,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deskripsi-berita\",children:\"Deskripsi Berita:\"})}),/*#__PURE__*/_jsx(Col,{xs:12,md:9,children:/*#__PURE__*/_jsx(TextField,{id:\"deskripsi-berita\",variant:\"outlined\",multiline:true,rows:3,fullWidth:true,value:content,onChange:e=>setContent(e.target.value)})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Kirim\"})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default FormBerita;","map":{"version":3,"names":["Container","Button","Row","Col","postNews","useState","useRef","ToastContainer","toast","Slide","TextField","Alerts","jsx","_jsx","jsxs","_jsxs","FormBerita","title","setTitle","content","setContent","image","setImage","imagePreview","setImagePreview","errorMessage","setErrorMessage","fileInputRef","tambahBerita","e","preventDefault","success","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","autoClose","current","value","error","_error$response","_error$response$data","_error$response2","_error$response3","_error$response3$data","console","response","data","message","handleImageChange","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","style","maxWidth","margin","padding","children","onSubmit","peringatan","className","xs","md","htmlFor","id","variant","fullWidth","onChange","type","ref","display","alignItems","marginBottom","marginRight","src","alt","width","height","objectFit","multiline","rows"],"sources":["/home/ubuntu/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni-main/YARSI-Connect-Alumni/front-end/src/components/FormBerita.js"],"sourcesContent":["import { Container, Button, Row, Col } from \"react-bootstrap\";\nimport { postNews } from \"../api/Api\";\nimport { useState, useRef } from \"react\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport TextField from \"@mui/material/TextField\";\nimport Alerts from \"../components/Alerts\";\n\nfunction FormBerita() {\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\"); \n\n  const fileInputRef = useRef(null);\n\n  const tambahBerita = async (e) => {\n    e.preventDefault();\n    setErrorMessage(\"\"); \n    try {\n      await postNews(title, content, image);\n      toast.success(\"Berita berhasil ditambahkan!\", {\n        position: \"top-right\",\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n        transition: Slide,\n        autoClose: 2000,\n      });\n\n      setTitle(\"\");\n      setContent(\"\");\n      setImage(null);\n      setImagePreview(null);\n\n      if (fileInputRef.current) {\n        fileInputRef.current.value = null;\n      }\n    } catch (error) {\n      console.error(\"Error dari server:\", error.response?.data?.message || error.response?.data);\n      setErrorMessage(error.response?.data?.error || \"Semua data wajib diisi!\"); \n    }\n  };\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setImage(file);\n\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImagePreview(reader.result);\n    };\n\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      setImagePreview(null);\n    }\n  };\n\n  return (\n    <Container style={{ maxWidth: \"800px\", margin: \"0 auto\", padding: \"20px\" }}>\n      <form onSubmit={tambahBerita}>\n        {errorMessage && <Alerts peringatan={errorMessage} />} \n\n        <Row className=\"mb-4 align-items-center\">\n          <Col xs={12} md={3}>\n            <label htmlFor=\"judul-berita\">Judul Berita:</label>\n          </Col>\n          <Col xs={12} md={9}>\n            <TextField\n              id=\"judul-berita\"\n              variant=\"outlined\"\n              fullWidth\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n            />\n          </Col>\n        </Row>\n\n        <Row className=\"mb-4 align-items-center\">\n          <Col xs={12} md={3}>\n            <label htmlFor=\"unggah-foto\">Unggah Foto:</label>\n          </Col>\n          <Col xs={12} md={9}>\n            <input\n              type=\"file\"\n              id=\"unggah-foto\"\n              onChange={handleImageChange}\n              ref={fileInputRef}\n              style={{ display: \"block\" }}\n            />\n          </Col>\n        </Row>\n\n        {imagePreview && (\n          <div style={{ display: \"flex\", alignItems: \"center\", marginBottom: \"25px\" }}>\n            <label style={{ marginRight: \"100px\" }}>Preview Foto:</label>\n            <img\n              src={imagePreview}\n              alt=\"Preview\"\n              style={{ width: \"200px\", height: \"auto\", objectFit: \"cover\" }}\n            />\n          </div>\n        )}\n\n        <Row className=\"mb-4 align-items-center\">\n          <Col xs={12} md={3}>\n            <label htmlFor=\"deskripsi-berita\">Deskripsi Berita:</label>\n          </Col>\n          <Col xs={12} md={9}>\n            <TextField\n              id=\"deskripsi-berita\"\n              variant=\"outlined\"\n              multiline\n              rows={3}\n              fullWidth\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n            />\n          </Col>\n        </Row>\n\n        <div className=\"d-flex justify-content-end\">\n          <Button type=\"submit\">Kirim</Button>\n        </div>\n      </form>\n      <ToastContainer />\n    </Container>\n  );\n}\n\nexport default FormBerita;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}